{"ast":null,"code":"var _jsxFileName = \"D:\\\\FER202\\\\26_02_2025___PE 2024 Summer\\\\PE 2024 Summer\\\\src\\\\pages\\\\AddStarsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { MovieContext } from '../context/MovieContext';\nimport { Form, Button, Alert, Card, Container, Row, Col } from 'react-bootstrap';\nimport axios from 'axios';\nimport { BASE_URL } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddStarsPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    movies,\n    stars,\n    setMovies\n  } = useContext(MovieContext);\n  const movie = movies.find(m => m.id == parseInt(id));\n  const [selectedStars, setSelectedStars] = useState(movie ? movie.stars : []);\n  const [message, setMessage] = useState('');\n  const handleStarToggle = starId => {\n    const numericStarId = parseInt(starId); // Chuyển đổi starId thành số\n    setSelectedStars(prevState => prevState.includes(numericStarId) ? prevState.filter(id => id !== numericStarId) : [...prevState, numericStarId]);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const updatedMovie = {\n        ...movie,\n        stars: selectedStars\n      };\n      await axios.patch(`${BASE_URL}/movies/${id}`, {\n        stars: selectedStars\n      });\n      setMovies(prevMovies => prevMovies.map(m => m.id == movie.id ? updatedMovie : m));\n      setMessage('Stars added successfully');\n      setTimeout(() => {\n        setMessage('');\n        navigate('/movie');\n      }, 2000);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  if (!movie) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Movie not found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-md-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"mt-5\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            as: \"h3\",\n            children: \"Add stars to the movie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n              children: [\"Movie title: \", movie.title]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"d-flex flex-wrap\",\n                children: stars.map(star => /*#__PURE__*/_jsxDEV(Form.Check, {\n                  type: \"checkbox\",\n                  label: star.fullname,\n                  checked: selectedStars.includes(star.id) // Kiểm tra trạng thái checked\n                  ,\n                  onChange: () => handleStarToggle(star.id),\n                  className: \"mb-2 mr-3\"\n                }, star.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 58,\n                  columnNumber: 41\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 56,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"primary\",\n                className: \"mt-3\",\n                children: \"Add Stars\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 29\n            }, this), message && /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"success\",\n              className: \"mt-3\",\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(AddStarsPage, \"Hzt2xV8v8tOn0sTtL+TtEr4Ddeo=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = AddStarsPage;\nexport default AddStarsPage;\nvar _c;\n$RefreshReg$(_c, \"AddStarsPage\");","map":{"version":3,"names":["React","useContext","useState","useParams","useNavigate","MovieContext","Form","Button","Alert","Card","Container","Row","Col","axios","BASE_URL","jsxDEV","_jsxDEV","AddStarsPage","_s","id","navigate","movies","stars","setMovies","movie","find","m","parseInt","selectedStars","setSelectedStars","message","setMessage","handleStarToggle","starId","numericStarId","prevState","includes","filter","handleSubmit","e","preventDefault","updatedMovie","patch","prevMovies","map","setTimeout","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","className","md","Header","as","Body","Title","title","onSubmit","Group","star","Check","type","label","fullname","checked","onChange","variant","_c","$RefreshReg$"],"sources":["D:/FER202/26_02_2025___PE 2024 Summer/PE 2024 Summer/src/pages/AddStarsPage.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { MovieContext } from '../context/MovieContext';\r\nimport { Form, Button, Alert, Card, Container, Row, Col } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport { BASE_URL } from '../utils/api';\r\n\r\nconst AddStarsPage = () => {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { movies, stars, setMovies } = useContext(MovieContext);\r\n    const movie = movies.find(m => m.id == parseInt(id));\r\n    const [selectedStars, setSelectedStars] = useState(movie ? movie.stars : []);\r\n    const [message, setMessage] = useState('');\r\n\r\n\r\n    const handleStarToggle = (starId) => {\r\n        const numericStarId = parseInt(starId); // Chuyển đổi starId thành số\r\n        setSelectedStars(prevState => \r\n            prevState.includes(numericStarId) \r\n                ? prevState.filter(id => id !== numericStarId) \r\n                : [...prevState, numericStarId]\r\n        );\r\n    };\r\n    \r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const updatedMovie = { ...movie, stars: selectedStars };\r\n            await axios.patch(`${BASE_URL}/movies/${id}`, { stars: selectedStars });\r\n            setMovies(prevMovies => prevMovies.map(m => m.id == movie.id ? updatedMovie : m));\r\n            setMessage('Stars added successfully');\r\n            setTimeout(() => {\r\n                setMessage('');\r\n                navigate('/movie');\r\n            }, 2000);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    if (!movie) {\r\n        return <p>Movie not found</p>;\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Row className=\"justify-content-md-center\">\r\n                <Col md={8}>\r\n                    <Card className=\"mt-5\">\r\n                        <Card.Header as=\"h3\">Add stars to the movie</Card.Header>\r\n                        <Card.Body>\r\n                            <Card.Title>Movie title: {movie.title}</Card.Title>\r\n                            <Form onSubmit={handleSubmit}>\r\n                                <Form.Group className=\"d-flex flex-wrap\">\r\n                                    {stars.map(star => (\r\n                                        <Form.Check \r\n                                            key={star.id}\r\n                                            type=\"checkbox\"\r\n                                            label={star.fullname}\r\n                                            checked={selectedStars.includes(star.id)} // Kiểm tra trạng thái checked\r\n                                            onChange={() => handleStarToggle(star.id)}\r\n                                            className=\"mb-2 mr-3\"\r\n                                        />\r\n                                    ))}\r\n                                </Form.Group>\r\n                                <Button type=\"submit\" variant=\"primary\" className=\"mt-3\">Add Stars</Button>\r\n                            </Form>\r\n                            {message && <Alert variant=\"success\" className=\"mt-3\">{message}</Alert>}\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default AddStarsPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}